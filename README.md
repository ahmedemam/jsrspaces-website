# JSRSpaces - Coworking Space Website & Infrastructure

A complete self-hosted infrastructure for JSRSpaces coworking space, including the website and management tools.

**Original Design**: [Figma - Coworking Space Details](https://www.figma.com/design/D8Q9HcernZjTDoon3CBlyB/Coworking-Space-Details)

## ğŸš€ Quick Start

### Development

```bash
# Install dependencies
npm install

# Run development server
npm run dev
```

### Production Deployment

#### Local/Linux Server

```bash
# 1. Build the website
./deploy-website.sh
# or manually: npm run build

# 2. Update domain in proxy/conf/Caddyfile (if needed)

# 3. Start all infrastructure services
./manage.sh start

# 4. Initialize ERPNext (first time only - takes 5-10 minutes)
./manage.sh erp-init

# 5. Access services
# - Website: https://www.jsrspaces.com
# - ERPNext: https://erp.jsrspaces.com
# - Booked: https://booked.jsrspaces.com (after setup)
```

#### AWS EC2 Deployment

On EC2, install Docker and Node.js, then:

```bash
# First time: Start all services
./manage.sh start

# Deploy updates: Pull, build, restart, cleanup
./manage.sh deploy
```

Make sure EC2 security group allows ports 80 and 443, and point DNS to your EC2 IP.

## ğŸ“ Project Structure

```
jsrspaces-website/
â”œâ”€â”€ src/                      # React website source code
â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”œâ”€â”€ styles/              # Stylesheets
â”‚   â””â”€â”€ ...
â”œâ”€â”€ build/                   # Built website (generated by npm run build)
â”œâ”€â”€ booked/                  # Booked Scheduler setup
â”œâ”€â”€ proxy/                   # Caddy reverse proxy config
â”œâ”€â”€ docker-compose.yml       # Main compose file
â”œâ”€â”€ docker-compose.*.yml     # Service-specific configs
â”œâ”€â”€ manage.sh                # Infrastructure management
â”œâ”€â”€ deploy-website.sh        # Website build script
â””â”€â”€ README.md                # This file
```

## ğŸ› ï¸ Configuration

### Domain Setup

1. Update `proxy/conf/Caddyfile` with your domain:
   ```caddy
   jsrspaces.com {
       ...
   }
   ```

2. Point your domain's DNS A record to your server IP

3. Caddy will automatically get SSL certificates from Let's Encrypt

### Website Build

The website is a **Vite + React** application:
- **Build command**: `npm run build`
- **Output directory**: `./build`
- **Nginx serves**: `./build` directory

The build is automatically configured in `docker-compose.website.yml`.

## ğŸ“¦ Services

| Service | URL | Purpose |
|---------|-----|---------|
| **Website** | `https://www.jsrspaces.com` | Public-facing website (React/Vite) |
| **ERPNext** | `https://erp.jsrspaces.com` | Member management, billing, CRM |
| **Booked** | `https://booked.jsrspaces.com` | Resource booking (desks, rooms) |

## ğŸ¯ Management Commands

```bash
# Build website
npm run build

# Infrastructure management
./manage.sh start            # Start all services
./manage.sh stop             # Stop all services
./manage.sh restart          # Restart all services
./manage.sh status           # Show service status
./manage.sh logs             # View all logs
./manage.sh erp-init         # Initialize ERPNext (first time)
```

## ğŸ“… Booked Scheduler Setup

For resource booking system:

1. **Download Booked Scheduler**:
   ```bash
   cd booked
   wget https://github.com/tssg/bookedscheduler/releases/latest/download/bookedscheduler.zip
   unzip bookedscheduler.zip
   ```

2. **Configure database** (in `booked/config/config.php`):
   - Host: `booked_db`
   - Database: `booked`
   - Username: `booked`
   - Password: `booked_password_change_me`

3. **Start services**: `./manage.sh start`

4. **Access**: `https://booked.jsrspaces.com`

See `booked/README.md` for detailed instructions.

## ğŸ’¼ ERPNext Setup

ERPNext handles member management, billing, and CRM.

### Initialization

After first start:
```bash
./manage.sh erp-init
```

### Access

- **URL**: `https://erp.jsrspaces.com`
- **Default Username**: `Administrator`
- **Default Password**: `admin`

**âš ï¸ Important**: Change the default password immediately!

## ğŸ”„ Deployment Workflow

1. **Make changes** to website in `src/`
2. **Build**: `npm run build`
3. **Restart**: `./manage.sh restart website`
4. **Verify**: Check `https://www.jsrspaces.com`

## ğŸ”’ Security

- âœ… HTTPS enforced via Caddy (Let's Encrypt)
- âœ… Security headers in Nginx
- âœ… Container isolation
- âœ… Read-only volume mounts
- âœ… Health checks enabled

## ğŸ†˜ Troubleshooting

**Website not loading?**
- Check if build exists: `ls -la build/`
- Rebuild: `npm run build`
- Check logs: `./manage.sh logs website`
- Verify DNS: `dig jsrspaces.com`

**Build fails?**
- Clear node_modules: `rm -rf node_modules && npm install`
- Check Node.js version: `node --version` (should be 18+)

**Services not starting?**
- Check Docker: `docker ps`
- View status: `./manage.sh status`
- Check logs: `./manage.sh logs`

## ğŸ“š Technology Stack

- **Frontend**: React 18 + TypeScript
- **Build Tool**: Vite 6
- **UI Components**: Radix UI + Tailwind CSS
- **Infrastructure**: Docker Compose
- **Reverse Proxy**: Caddy
- **Web Server**: Nginx
- **ERP**: ERPNext
- **Booking**: Booked Scheduler

## ğŸ“ Notes

- Website build outputs to `./build/` (configured in `vite.config.ts`)
- Caddy handles SSL certificates automatically
- All services run in isolated Docker network
- Website files are served read-only from container
- Health checks ensure services are running

---

**Inspired by**: [MasteryHub ITS Self-Hosted Infrastructure](https://gitlab.com/masteryhub-its/masteryhub-its-self-hosted-infrastructure)
